<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">

<!--
Copyright 1999-2004 The Apache Software Foundation
Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->
    
<!-- start the processing -->
    <!-- ====================================================================== -->
    <!-- GENERATED FILE, DO NOT EDIT, EDIT THE XML FILE IN xdocs INSTEAD! -->
    <!-- Main Page Section -->
    <!-- ====================================================================== -->
    <html>
        <head>
            <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"/>

                                                    <meta name="author" value="Velocity Documentation Team">
            <meta name="email" value="jvanzyl@zenplex.com">
            
           
                                    
                        
            <title>Velocity - Building Velocity from Source</title>

									<link rel="stylesheet" href="http://jakarta.apache.org/velocity/site.css" type="text/css">
			
									<link rel="stylesheet" href="./site.css" type="text/css">
        </head>

        <body>        

									
			<div id="container">

				<div id="header">
					
<div id="logo1">
	<a href="http://jakarta.apache.org"><img src="http://jakarta.apache.org/images/jakarta-logo.gif" border="0"/></a>
</div>



<div id="logo2">

<a href="http://jakarta.apache.org/velocity/"><img src="./images/newlogo.png" alt="Velocity" border="0"/></a>

</div>

				</div>

				<div id="menu">
					
    <!-- ============================================================ -->

            	<div class="menusection">
    		<span class="menuheader">Velocity</span>
			<ul>
							<li>    <a href="./index.html">Home</a>
</li>
							<li>    <a href="./overview.html">Overview</a>
</li>
							<li>    <a href="./getting-started.html">Getting Started</a>
</li>
							<li>    <a href="./webapps.html">Web Applications</a>
</li>
							<li>    <a href="http://jakarta.apache.org/site/downloads/downloads_velocity.cgi">Download</a>
</li>
							<li>    <a href="http://wiki.apache.org/jakarta-velocity/VelocityFAQ">FAQ (Wiki)</a>
</li>
						</ul>
        </div>
        	<div class="menusection">
    		<span class="menuheader">Docs</span>
			<ul>
							<li>    <a href="./docs/user-guide.html">User Guide</a>
</li>
							<li>    <a href="./docs/developer-guide.html">Developer Guide</a>
</li>
							<li>    <a href="./docs/vtl-reference-guide.html">VTL Reference</a>
</li>
							<li>    <a href="./docs/anakia.html">Anakia : XML->doc tool</a>
</li>
							<li>    <a href="./docs/texen.html">Texen : text generation</a>
</li>
							<li>    <a href="./docs/veltag.html">Veltag : JSP taglib</a>
</li>
							<li>    <a href="./docs/api/index.html">Javadoc</a>
</li>
							<li>    <a href="./docs/changes.html">Change Log</a>
</li>
							<li>    <a href="./docs/license.html">License</a>
</li>
						</ul>
        </div>
        	<div class="menusection">
    		<span class="menuheader">Sub Projects</span>
			<ul>
							<li>    <a href="http://jakarta.apache.org/velocity/tools/index.html">Velocity Tools</a>
</li>
							<li>    <a href="http://jakarta.apache.org/velocity/dvsl/index.html">DVSL : XML transformation</a>
</li>
						</ul>
        </div>
        	<div class="menusection">
    		<span class="menuheader">Community</span>
			<ul>
							<li>    <a href="http://wiki.apache.org/jakarta-velocity/">Wiki</a>
</li>
							<li>    <a href="http://wiki.apache.org/jakarta-velocity/VelocityNews">Recent News</a>
</li>
							<li>    <a href="http://wiki.apache.org/jakarta-velocity/PoweredByVelocity">Powered By Velocity</a>
</li>
							<li>    <a href="http://wiki.apache.org/jakarta-velocity/VelocityEditors">IDE/Editor Plugins</a>
</li>
							<li>    <a href="http://wiki.apache.org/jakarta-velocity/PublishedArticlesAndBooks">Articles and Books</a>
</li>
							<li>    <a href="http://wiki.apache.org/jakarta-velocity/GetInvolved">Get Involved</a>
</li>
							<li>    <a href="http://jakarta.apache.org/site/mail.html">Mailing Lists</a>
</li>
						</ul>
        </div>
        	<div class="menusection">
    		<span class="menuheader">Developers</span>
			<ul>
							<li>    <a href="http://www.apache.org/dev/version-control.html">Source Code Repository</a>
</li>
							<li>    <a href="./build.html">Building from Source</a>
</li>
							<li>    <a href="http://svn.apache.org/snapshots/jakarta-velocity/">Nightly Snapshots</a>
</li>
							<li>    <a href="http://wiki.apache.org/jakarta-velocity/RoadMap">Road Map</a>
</li>
							<li>    <a href="./jar-dependencies.html">Dependencies</a>
</li>
							<li>    <a href="http://wiki.apache.org/jakarta-velocity/CodeStandards">Coding Standards</a>
</li>
							<li>    <a href="http://wiki.apache.org/jakarta-velocity/DocumentationGuidelines">Documentation Guidelines</a>
</li>
							<li>    <a href="http://issues.apache.org/jira/browse/VELOCITY">Issues</a>
</li>
							<li>    <a href="./committers.html">List of Committers</a>
</li>
						</ul>
        </div>
        	<div class="menusection">
    		<span class="menuheader">Translations</span>
			<ul>
							<li>    <a href="http://www.jajakarta.org/velocity/">Site (Japanese)</a>
</li>
							<li>    <a href="./translations/user-guide_fi.html">User's Guide (Finnish)</a>
</li>
							<li>    <a href="./translations/user-guide_fr.html">User's Guide (French)</a>
</li>
							<li>    <a href="./translations/user-guide_es.html">User's Guide (Spanish)</a>
</li>
						</ul>
        </div>
    				</div>

				<div id="body">
																	<a name="Installation"></a>
	<h1>Installation</h1>

	<div class="subsection">
														<p>
Velocity runs on a variety of platforms that have installed the Java 2
Virtual Machine. The J2SDK is required for users who want to compile
Velocity from its source code.
</p>
																			<p>
Everything required to build Velocity comes with the distribution, which
can be obtained from <a href="http://www.apache.org/dev/version-control.html">Subversion</a> or
from the <a href="http://svn.apache.org/snapshots/jakarta-velocity/">nightly
snapshots</a>.  However, you will need to install Ant, an excellent
Java-based build tool.  Ant is also a Jakarta project, and can be
found <a href="http://jakarta.apache.org/ant/">here</a>.
</p>
																			<p>
The directory tree of the distribution looks like :
</p>
																			<div class="source">
jakarta-velocity
  /build        - contains build scripts
  /bin          - where the built jars / classes will go
  /src          - source for Velocity, Anakia, and Texen
  /docs         - documentation in HTML form
  /docs/api     - Javadocs for Velocity source
  /examples     - example/demonstration code
  /convert      - tools to help convert WebMacro templates
  /test         - test programs and templates
  /xdocs        - source for our documentation
</pre></div>
								</div>
												<a name="Building"></a>
	<h1>Building</h1>

	<div class="subsection">
														<p>
To make building Velocity easy and consistant, we require a Jakarta project
called <a href="http://jakarta.apache.org/ant/">Ant</a> version 1.3 or
higher to perform the build process. We assume that you have followed
Ant's installation instructions and have it properly installed.  It's not
difficult, and I think that you will find it an excellent addition to
your programmer's toolbox.
</p>
																			<p>
In each case below, it is assumed that you were successful in getting
the distribution from Subversion or as a nightly build, and with the latter,
were successful in unpacking.  Also, it is assumed that you are starting
in the 'jakarta-velocity' directory, the root of the distribution tree. 
All directory references will be relative to 'jakarta-velocity'.
</p>
																			<p>
Change to the <b>build</b> directory (<code>cd
build</code>). Then, to build the jar file, simply type:
</p>
																			<div class="source">
ant
</pre></div>
																			<p>
Executing this script will create a <b>bin</b> directory
within the Velocity distribution directory. The <b>bin</b>
directory will contain the compiled class files (inside a
<b>classes</b> directory) as well as a
<b>velocity-XX.jar</b> file, where XX is the current
version number. Be sure to update your classpath to include Velocity's
<b>.jar</b> file.
</p>
																			<p>
Note that to build any of the specific build targets simply add
the target name to the command line.  For example, to build the Javadoc
API documentation :
</p>
																			<div class="source">
ant javadocs
</pre></div>
																			<p>Some of the most useful targets are:
</p>
																			<ul>
			<li>
						
    
													<b><code>jar</code></b>
										 builds the complete Velocity jar in the
    
													<code>bin</code>
										 directory.  This jar will be called 'velocity-X.jar',
    where 'X' is the current version number. This jar does not include
    necessary dependencies for Velocity.  If you use this
    target, you must get the Collections component jar from Jakarta Commons and add
    to your CLASSPATH (or WEB-INF/lib).
    If you wish to use the built-in logging or template conversion,
    you must include the appropriate jars in your CLASSPATH or
    webapp's WEB-INF/lib.
    For convenience, you can use the 
													<code>jar-dep</code>
										 target to build
    a jar with ORO, Logkit and Commons Collections included.
  
			</li>
			<li>
						
    
													<b><code>jar-dep</code></b>
										 builds the complete Velocity jar in
    the 
													<code>bin</code>
										 directory, including necessary
    support for logging from the
    
													<a href="http://jakarta.apache.org/avalon/logkit/index.html">Jakarta
    Avalon Logkit</a>
										 package, critical configuration support from the
    
													<a href="http://jakarta.apache.org/commons/">Jakarta Commons</a>
										
    and the necesary support for WebMacro
    template conversion using the
    
													<a href="http://jakarta.apache.org/oro/index.html">Jakarta ORO</a>
										
    package.
   
			</li>
			<li>
						
    
													<b><code>jar-core</code></b>
										 builds a slimmer Velocity jar in the
    
													<code>bin</code>
										 directory, called 'velocity-core-X.jar'. This jar
    contains the core Velocity functionality, and doesn't include example
    and utility things like Anakia, Texen or the VelocityServlet support
    baseclass.  It has the same external dependency requirements as the
    regular 
													<code>jar</code>
										 target.
  
			</li>
			<li>
						
    
													<b><code>jar-util</code></b>
										 builds a utility Velocity jar in the
    
													<code>bin</code>
										 directory, called 'velocity-util-X.jar'. This jar
    contains utility code, specifically Anakia, Texen, and the WebMacro
    template conversion utility. It has the same external dependency requirements as the
    regular 
													<code>jar</code>
										 target.
  
			</li>
			<li>
						
    
													<b><code>jar-J2EE</code></b>
										 builds a complete jar, like the 'jar' target,
    that includes any components that require J2EE support. Currently, this
    includes only org.apache.velocity.runtime.resource.loader.DataSourceResourceLoader.
    As usual, it is placed in the  
													<code>bin</code>
										 directory, called
    'velocity-j2ee-X.jar'. NOTE : if you wish to use this build target, you
    must place (or link) a copy of j2ee.jar into the build/lib directory.
    We do not provide it as part of the distribution. A good source is
    http://java.sun.com/.  It has the same external dependency requirements as the
    regular 
													<code>jar</code>
										 target.
  
			</li>
			<li>
						
    
													<b><code>jar-J2EE-dep</code></b>
										 build a complete jar with J2EE support
    and includes logging support from the Jakarta Avalon Logkit and
    regexp support fromt the Jakarta ORO package. See the notes on the
    
													<code>jar-dep</code>
										 target, above.
  
			</li>
			<li>
						
    
													<b><code>examples</code></b>
										 builds the example code in the example programs
    found in the 
													<code>examples</code>
										 directory. This build target will
    also build the forumdemo example project.
  
			</li>
			<li>
						
    
													<b><code>docs</code></b>
										 builds these docs in the 
													<code>docs</code>
										 directory
    using Velocity's 
													<a href="anakia.html">Anakia</a>
										 XML transformation tool.
    Allowing you to use
    Velocity templates in place of stylesheets
    - give it a try! 
  
			</li>
			<li>
						
    
													<b><code>jar-src</code></b>
										 bundles all the Velocity source code into a single
    jar, placed in the 
													<code>bin</code>
										 directory.
  
			</li>
			<li>
						
    
													<b><code>javadocs</code></b>
										 builds the Javadoc class documentation in the
    
													<code>docs/api</code>
										 directory
  
			</li>
			<li>
						
    
													<b><code>test</code></b>
										 (after jar) will test Velocity against its testbed
    suite of test routines
  
			</li>
			<li>
						
    
													<b><code>help</code></b>
										 lists the build targets that are available.
  
			</li>
	</ul>
																			<p>
Velocity should build 'out of the box', independent of your classpath.
If you get an error building Velocity, try a different nightly build (as
sometimes we make a mistake and the Subversion at the time of the nightly
snapshot isn't complete) or refresh from Subversion (you might have gotten a
Subversion snapshot while a developer was checking things in.)
</p>
																			<p>
If the problems persist, do not hesitate to ask the Velocity community
via our mail lists. They can be found <a href="http://jakarta.apache.org/site/mail.html">here</a>. Please read
and understand the the guidelines for participating in any Jakarta mail
list.
</p>
								</div>
												<a name="Testing Your Installation"></a>
	<h1>Testing Your Installation</h1>

	<div class="subsection">
														<p>
The Velocity developers use an automated test facility, and it is
included in the distribution. You can use it to make sure that all is
well with your build of Velocity.
</p>
																			<p>
To run the test suite, simply use the build target
<b>test</b> when you build :
</p>
																			<div class="source">
ant test
</pre></div>
																			<p>
If all is well, you should see output similar to :
</p>
																			<div class="source">
junittest:
    [junit] Running org.apache.velocity.util.TestSimplePool
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 0.025 sec

test:

test-template:
     [echo] Running Template tests...
     [java] Adding TemplateTestCase : arithmetic
     ...
     ...
     ...
     [java] Adding TemplateTestCase : foreach-introspect
     [java] Adding TemplateTestCase : settest
     [java] .......................................
     [java] Time: 1.999

     [java] OK (39 tests)


test-velocityapp:
     [echo] Running app.Velocity tests...
     [java] .
     [java] Time: 0.004

     [java] OK (1 tests)


...

BUILD SUCCESSFUL
Total time: 42 seconds

</pre></div>
																			<p>
Note that the number of tests may vary from those shown above, but if
you see 'OK' after the tests are run, all is well.  
</p>
								</div>
									</div>

				<div id="footer">
					Copyright &#169; 1999-2005, The Apache Software Foundation
				</div>

			</div>
			
        </body>
    </html>
<!-- end the processing -->





















